<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Risk Battle Odds Calculator</title>
</head>
<body>
    <p><br>Risk Battle Odds Calculator!<br><br>This webpage will calculate the likelihood of winning a given battle of risk given the number of attackers and defenders in said battle.<br><br>Please do note that you need to enter the number of attackers in the battle, which is 1 troop fewer than the total number of troops in the attacking territory.</p>
    <form onsubmit="return mainfunct();" action="">
        <div>
            <label for="numatk">Enter the number of attackers:<br></label>
            <input type="number" name="numatk" id="numatk" min="1", max="1000" required>
        </div>
        <div>
            <label for="numdef">Enter the number of defenders:<br></label>
            <input type="number" name="numdef" id="numdef" min="1", max="1000" required>
        </div>
        <div">
            <input type="submit" value="Simulate Battle!" />
        </div>
    </form>
    <p id="atkwinprob"></p>
    <p id="atkexplosses"></p>
    <p id="defexplosses"></p>
    <p><br><br><br><br><br><br>Published 2024-02-08 by chickenspaceprogram.</p>
    <script>
        var atkwinproblist = []
        async function fetchAtkWinProb() {
            const fetchedjson = await fetch("https://chickenspaceprogram.github.io/riskoddscalc/atkWinProbs.json");
            atkwinproblist = await fetchedjson.json();
        }
        async function fetchAtkExpLoss() {
            const fetchedjson = await fetch("https://chickenspaceprogram.github.io/riskoddscalc/atkExpLoss.json");
            atkexplosslist = await fetchedjson.json();
        }
        async function fetchDefExpLoss() {
            const fetchedjson = await fetch("https://chickenspaceprogram.github.io/riskoddscalc/defExpLoss.json");
            defexplosslist = await fetchedjson.json();
        }
        function mainfunct() {
            var numatk = document.getElementById("numatk").value;
            var numdef = document.getElementById("numdef").value;
            console.log("Number attackers: ", numatk)
            console.log("Number defenders: ", numdef)
            var atkwinprob = atkwinproblist[numdef][numatk]
            var atkexploss = atkexplosslist[numdef][numatk]
            var defexploss = defexplosslist[numdef][numatk]
            atkwinprob = Math.round(atkwinprob * 100000) / 1000
            atkexploss = Math.round(atkexploss * 10) / 10
            defexploss = Math.round(defexploss * 10) / 10
            document.getElementById("atkwinprob").innerHTML = "There is a " + atkwinprob + "% chance that the attacker will win the battle."
            document.getElementById("atkexplosses").innerHTML = "The attacker is expected to lose " + atkexploss + "troops."
            document.getElementById("defexplosses").innerHTML = "The defender is expected to lose " + defexploss + "troops."
            return false;
        }
        fetchAtkWinProb()
        fetchAtkExpLoss()
        fetchDefExpLoss()
    </script>
</body>
</html>